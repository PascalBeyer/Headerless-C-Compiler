@echo off

rem these pauses are a hack, because we need for the files need to be flushed.

set compiler="../../build/pbc.exe"

echo ****************************************************************************
echo ********************** compiling the generator *****************************
echo ****************************************************************************

call %compiler% -I ../../src -L kernel32.dll generate.c -o generate


echo ****************************************************************************
echo **********************  Generating a 'big' program *************************
echo ****************************************************************************

PAUSE
generate.exe

echo ****************************************************************************
echo ******************** compiling the 'big' program ***************************
echo ****************************************************************************
PAUSE
call %compiler% -L kernel32.dll generated.c -o generated

echo ****************************************************************************
echo ********************** run the generated output ****************************
echo ****************************************************************************

PAUSE
generated.exe

echo ****************************************************************************
echo ************************* cleaning the folder ******************************
echo ****************************************************************************

PAUSE
del *.exe
del *.pdb
del generated.c